<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert between horizon-stacked and temporal layouts — as_tevector • FoReco</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert between horizon-stacked and temporal layouts — as_tevector"><meta name="description" content="These functions convert matrix between the two canonical layouts used in
temporal reconciliation.
Let \(m\) be the maximum temporal aggregation order and \(k^\ast\) the sum
of a subset of the \((p-1)\) proper factors of \(m\) (excluding \(m\));
let \(h\) be the forecast horizon for the lowest frequency series (e.g.,
most aggregated temporal forecast horizon):
Horizon-stacked layout (temporal version): a
\(h \times (k^\ast + m)\) matrix where rows are the most aggregated temporal
forecast horizons, and the values in each row are ordered from the lowest frequency
(most temporally aggregated) to the highest frequency.
Temporal layout: a (\(h(k^\ast + m) \times 1\)) numeric vector where
values are ordered from the lowest frequency (most temporally aggregated) to the
highest frequency.
Then, as_tevector converts a \((h \times (k^\ast+m))\)
horizon-stacked matrix to a (\(h(k^\ast + m) \times 1\)) temporal vector;
as_hstack_telayout performs the inverse transform."><meta property="og:description" content="These functions convert matrix between the two canonical layouts used in
temporal reconciliation.
Let \(m\) be the maximum temporal aggregation order and \(k^\ast\) the sum
of a subset of the \((p-1)\) proper factors of \(m\) (excluding \(m\));
let \(h\) be the forecast horizon for the lowest frequency series (e.g.,
most aggregated temporal forecast horizon):
Horizon-stacked layout (temporal version): a
\(h \times (k^\ast + m)\) matrix where rows are the most aggregated temporal
forecast horizons, and the values in each row are ordered from the lowest frequency
(most temporally aggregated) to the highest frequency.
Temporal layout: a (\(h(k^\ast + m) \times 1\)) numeric vector where
values are ordered from the lowest frequency (most temporally aggregated) to the
highest frequency.
Then, as_tevector converts a \((h \times (k^\ast+m))\)
horizon-stacked matrix to a (\(h(k^\ast + m) \times 1\)) temporal vector;
as_hstack_telayout performs the inverse transform."><meta property="og:image" content="https://danigiro.github.io/FoReco/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FoReco</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.0.9013</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-book"></span> Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-question-circle"></span> Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/Dataset-vndata-and-itagdp.html">The `vndata` and `itagdp` dataset</a></li>
    <li><a class="dropdown-item" href="../articles/Cross-sectional-forecast-reconciliation.html">Cross-sectional forecast reconciliation</a></li>
    <li><a class="dropdown-item" href="../articles/Temporal-forecast-reconciliation.html">Temporal forecast reconciliation</a></li>
    <li><a class="dropdown-item" href="../articles/Cross-temporal-forecast-reconciliation.html">Cross-temporal forecast reconciliation</a></li>
    <li><a class="dropdown-item" href="../articles/Replicate-the-hts-package.html">Replicate the `hts` package</a></li>
    <li><a class="dropdown-item" href="../articles/Replicate-the-thief-package.html">Replicate the `thief` package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa far fa-newspaper"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/danigiro/FoReco" aria-label="View on GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cran.r-project.org/web/packages/FoReco/index.html" aria-label="View on CRAN"><span class="fa fab fa-r-project fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Convert between horizon-stacked and temporal layouts</h1>
      <small class="dont-index">Source: <a href="https://github.com/danigiro/FoReco/blob/HEAD/R/matrix_layout.R" class="external-link"><code>R/matrix_layout.R</code></a></small>
      <div class="d-none name"><code>tematrix_layouts.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions convert matrix between the two canonical layouts used in
temporal reconciliation.
Let \(m\) be the maximum temporal aggregation order and \(k^\ast\) the sum
of a subset of the \((p-1)\) proper factors of \(m\) (excluding \(m\));
let \(h\) be the forecast horizon for the lowest frequency series (e.g.,
most aggregated temporal forecast horizon):</p><ul><li><p><em>Horizon-stacked layout (temporal version)</em>: a
\(h \times (k^\ast + m)\) matrix where rows are the most aggregated temporal
forecast horizons, and the values in each row are ordered from the lowest frequency
(most temporally aggregated) to the highest frequency.</p></li>
<li><p><em>Temporal layout</em>: a (\(h(k^\ast + m) \times 1\)) numeric vector where
values are ordered from the lowest frequency (most temporally aggregated) to the
highest frequency.</p></li>
</ul><p>Then, as_tevector converts a \((h \times (k^\ast+m))\)
horizon-stacked matrix to a (\(h(k^\ast + m) \times 1\)) temporal vector;
as_hstack_telayout performs the inverse transform.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">as_tevector</span><span class="op">(</span><span class="va">hmat</span>, <span class="va">agg_order</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_hstack_telayout</span><span class="op">(</span><span class="va">tevec</span>, <span class="va">agg_order</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-hmat">hmat<a class="anchor" aria-label="anchor" href="#arg-hmat"></a></dt>
<dd><p>A \(h \times (k^\ast+m)\) numeric matrix in <em>horizon-stacked</em> layout
(temporal version).</p></dd>


<dt id="arg-agg-order">agg_order<a class="anchor" aria-label="anchor" href="#arg-agg-order"></a></dt>
<dd><p>Highest available sampling frequency per seasonal cycle
(max. order of temporal aggregation, \(m\)), or a vector representing a
subset of \(p\) factors of \(m\).</p></dd>


<dt id="arg-tevec">tevec<a class="anchor" aria-label="anchor" href="#arg-tevec"></a></dt>
<dd><p>A (\(h(k^\ast + m) \times 1\)) numeric vector in <em>temporal</em> layout.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>as_tevector returns a (\(h(k^\ast + m) \times 1\)) numeric vector
in <em>temporal</em> layout.</p>
<p>as_hstack_telayout returns a \(h \times (k^\ast+m)\) numeric
matrix in <em>horizon-stacked</em> layout (temporal version).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Utilities:
<code><a href="FoReco2matrix.html">FoReco2matrix</a>()</code>,
<code><a href="aggts.html">aggts</a>()</code>,
<code><a href="ctmatrix_layouts.html">as_ctmatrix</a>()</code>,
<code><a href="balance_hierarchy.html">balance_hierarchy</a>()</code>,
<code><a href="commat.html">commat</a>()</code>,
<code><a href="csprojmat.html">csprojmat</a>()</code>,
<code><a href="cstools.html">cstools</a>()</code>,
<code><a href="ctprojmat.html">ctprojmat</a>()</code>,
<code><a href="cttools.html">cttools</a>()</code>,
<code><a href="df2aggmat.html">df2aggmat</a>()</code>,
<code><a href="lcmat.html">lcmat</a>()</code>,
<code><a href="recoinfo.html">recoinfo</a>()</code>,
<code><a href="residuals.html">res2matrix</a>()</code>,
<code><a href="set_bounds.html">set_bounds</a>()</code>,
<code><a href="shrink_estim.html">shrink_estim</a>()</code>,
<code><a href="shrink_oasd.html">shrink_oasd</a>()</code>,
<code><a href="teprojmat.html">teprojmat</a>()</code>,
<code><a href="tetools.html">tetools</a>()</code>,
<code><a href="unbalance_hierarchy.html">unbalance_hierarchy</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fl">2</span>   <span class="co"># horizons</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fl">4</span>   <span class="co"># temporal aggregation order</span></span></span>
<span class="r-in"><span><span class="va">kt</span> <span class="op">&lt;-</span> <span class="fu"><a href="tetools.html">tetools</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">$</span><span class="va">dim</span><span class="op">[</span><span class="st">"kt"</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Build a horizon-stacked matrix: h rows, n * k_t columns</span></span></span>
<span class="r-in"><span><span class="va">input_te</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">h</span> <span class="op">*</span> <span class="va">kt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">hmat</span> <span class="op">&lt;-</span> <span class="fu">as_hstack_telayout</span><span class="op">(</span><span class="va">input_te</span>, agg_order <span class="op">=</span> <span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tevec</span> <span class="op">&lt;-</span> <span class="fu">as_tevector</span><span class="op">(</span><span class="va">hmat</span>, agg_order <span class="op">=</span> <span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># all.equal(tevec, input_te, check.attributes = FALSE)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniele Girolimetto, Tommaso Di Fonzo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

